---
title: "An Overview of the aqp Package"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{An Overview of the aqp Package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, echo=FALSE, results='hide', warning=FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  background = '#F7F7F7',
  fig.align = 'center',
  dev = 'png',
  comment = "#>"
)

# keep examples from using more than 2 cores
data.table::setDTthreads(Sys.getenv("OMP_THREAD_LIMIT", unset = 2))

options(width = 100, stringsAsFactors = FALSE, timeout = 600)
```


# Index by Topic


## SoilProfileCollection Objects

### Creation
  * `depths()`
  * `site()`
  * `quickSPC()`
  * `random_profile()`

### Metadata  
  * `hzdesgnname()`
  * `hzDesgn()`
  * `hztexclname()`
  * `metadata()`
  * `hzID()`
  * `hzidname()`
  * `horizonDepths()`

### Properties
  * `length()`
  * `nrow()`
  * `names()`
  * `siteNames()`
  * `horizonNames()`

### Subset
  * `glom()`
  * `subset()`
  * `subsetHz()`
  * `[`
  * `[[`
  * `i, j, k indices`
  * `keywords`

### Depth
  * `aggregateSoilDepth()`
  * `depthOf()`
  * `minDepthOf()`
  * `maxDepthOf()`
  * `getSoilDepthClass()`
  * `min()`
  * `max()`
  
### Utility
  * `combine()`, `c()`
  * `compositeSPC()`
  * `denormalize()`
  * `duplicate()`
  * `perturb()`
  * `warpHorizons()`
  * `harmonize()`
  * `hzAbove()`
  * `hzBelow()`
  * `unique()`
  * `split()`
  * `site()`
  * `horizons()`
  * `replaceHorizons()`
  * `diagnostic_hz()`
  * `restrictions()`
  
### Iteration
  * `profileApply()`
  * `glomApply()`
  * `mutate_profile()`
  * `summarizeSPC()`
  * `transform()`

### Change of Support
  * `dice()`
  * `slab()`
  * `spc2mpspline()`
  * `segment()`
  * `L1_profiles()`
  * `slicedHSD()`

### Horizon Depth Logic
  * `accumulateDepths()`
  * `fillHzGaps()`
  * `repairMissingHzDepths()`
  * `flagOverlappingHz()`
  * `checkHzDepthLogic()`
  * `splitLogicErrors()`
  * `HzDepthLogicSubset()`

### Data QC
  * `evalMissingData()`
  * `missingDataGrid()`
  * `profileInformationIndex()`


### Object Coercion
  * `as(SPC, 'list')`
  * `as(SPC, 'data.frame')`
  * `as(SPC, 'sf')`

### Spatial Data
  * `prj()`
  * `initSpatial()`
  * `getSpatial()`

### Internal Consistency
  * `checkSPC()`
  * `rebuildSPC()`

## Soil Profile Sketches
  * `plotSPC()`
  * `explainPlotSPC()`
  * `groupedProfilePlot()`
  * `plotMultipleSPC()`
  * `addBracket()`
  * `addDiagnosticBracket()`
  * `addVolumeFraction()`
  * `alignTransect()`


## Soil Color / Color Science
  
### Color Conversion
  * `col2Munsell()`
  * `munsell2rgb()`
  * `parseMunsell()`
  * `spec2Munsell()`
  * `getClosestMunsellChip()`
  * `estimateSoilColor()` moist / dry

### Comparison
  * `contrastClass()`
  * `colorContrast()`
  * `colorContrastPlot()`
  * `contrastChart()`
  * `soilColorSignature()`

### Aggregation
  * `colorChart()`
  * `aggregateColor()`
  * `colorQuantiles()`
  

### Utility
  * `huePosition()`
  * `huePositionCircle()`
  * `simulateColor()`
  * `previewColors()`
  * `soilPalette()`
  * `equivalentMunsellChips()`

### Simulation of Mixtures
  * `mixMunsell()`
  * `plotColorMixture()`


## Numerical Classification of Soil Profiles
  * `compareSites()`
  * `NCSP()`


## Pedology
  * `allocate()`
  * `estimateAWC()`
  * `correctAWC()`
  * `hzDistinctnessCodeToOffset()`
  * `hzTopographyCodeToLineType()`
  * `hzTopographyCodeToOffset()`
  * `ph_to_rxnclass()`
  * `rxnclass_to_ph()`
  * `ReactionClassLevels()`
  * `horizonColorIndices()`

### Soil Texture
  * `textureTriangleSummary()`
  * `bootstrapSoilTexture()`
  * `SoilTextureLevels()`
  * `texcl_to_ssc()`
  * `ssc_to_texcl()`
  * `texture_to_taxpartsize()`
  
### Coarse Fragments
  * `fragmentSieve()`
  * `texmod_to_fragvoltot()`
  * `texture_to_texmod()`
  * `fragvol_to_texmod()`
  * `fragmentClasses()`

### Soil Taxonomy
  * `getArgillicBounds()`
  * `getCambicBounds()`
  * `getSurfaceHorizonDepth()`
  * `getMineralSoilSurfaceDepth()`
  * `getPlowLayerDepth()`
  * `hasDarkColors()`
  * `estimatePSCS()`

### Generalized Horizon Labels
  * `evalGenHZ()`
  * `generalize.hz()`
  * `genhzTableToAdjMat()`
  * `get.ml.hz()`
  * `guessGenHzLevels()`
  * `GHL()`

## Misc.
  * `invertLabelColor()`
  * `panel.depth_function()`
  * `hzTransitionProbabilities()`
  * `mostLikelyHzSequence()`

### Accuracy and Uncertainty
  * `shannonEntropy()`
  * `confusionIndex()`
  * `brierScore()`
  * `tauW()`

### Overlapping Annotation  
  * `findOverlap()`
  * `overlapMetrics()`
  * `fixOverlap()`

## Example Data 
  * `sp1`
  * `sp2`
  * `sp3`
  * `sp4`
  * `sp5`
  * `sp6`
  * `sierraTransect`
  * `wilson2022`
  * `rowley2019`
  * `jacobs2000`
  * `osd`
  * `SPC.with.overlap`
  * `us.state.soils`
  * `soil_minerals`
  * `munsell`
  * `equivalent_munsell`
  * `munsellHuePosition`
  * `munsell.spectra`
  * `spectral.reference`
  * `ROSETTA.centroids`
  * `reactionclass`
  * `soiltexture`

