<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get, add or change column of horizon or site data in a SoilProfileCollection — [[,SoilProfileCollection,character,ANY-method • aqp</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get, add or change column of horizon or site data in a SoilProfileCollection — [[,SoilProfileCollection,character,ANY-method" />
<meta property="og:description" content="Get, add or change the data from a column accessed by name. Column names other than profile ID are not shared between site and horizons. The benefit of using double bracket setter over $ is that name can be calculated, whereas with $, it must be known a priori and hard coded.
Bonus: [[ gives access to all site and horizon level variables in tab complete for RStudio using the magrittr pipe operator!
When using the double bracket setter the length of input and output matching either the number of sites or number of horizons is used to determine which slot new columns are assigned to." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aqp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.22</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ncss-tech/aqp/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get, add or change column of horizon or site data in a SoilProfileCollection</h1>
    <small class="dont-index">Source: <a href='https://github.com/ncss-tech/aqp/blob/master/R/SoilProfileCollection-operators.R'><code>R/SoilProfileCollection-operators.R</code></a></small>
    <div class="hidden name"><code>doublebracket.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get, add or change the data from a column accessed by name. Column names other than profile ID are not shared between site and horizons. The benefit of using double bracket setter over <code>$</code> is that <code>name</code> can be calculated, whereas with <code>$</code>, it must be known a priori and hard coded.</p>
<p>Bonus: <code>[[</code> gives access to all site and horizon level variables in tab complete for RStudio using the magrittr pipe operator!</p>
<p>When using the double bracket setter the length of input and output matching either the number of sites or number of horizons is used to determine which slot new columns are assigned to.</p>
    </div>

    <pre class="usage"># S4 method for SoilProfileCollection,character,ANY
[[(x, i)

# S4 method for SoilProfileCollection,ANY,ANY
[[(x, i, j, ...) <- value</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a SoilProfileCollection</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>an expression resolving to a single column name in site or horizon table</p></td>
    </tr>
    <tr>
      <th>j</th>
      <td><p>[not used]</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>[not used]</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>New value to replace -- unit length or equal in length to number of sites or horizons in the collection.</p></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>sp2</span>)
<span class='fu'>depths</span>(<span class='no'>sp2</span>) <span class='kw'>&lt;-</span> <span class='no'>id</span> ~ <span class='no'>top</span> + <span class='no'>bottom</span></div><div class='output co'>#&gt; <span class='message'>converting horizon IDs from integer to character</span></div><div class='input'><span class='fu'><a href='site.html'>site</a></span>(<span class='no'>sp2</span>) <span class='kw'>&lt;-</span> ~ <span class='no'>surface</span>

<span class='co'># get with [[</span>
<span class='no'>sp2</span><span class='kw'>[[</span><span class='st'>'surface'</span>]]</div><div class='output co'>#&gt;  [1] holocene        lower modesto   lower modesto   upper modesto  
#&gt;  [5] upper modesto   lower riverbank lower riverbank lower riverbank
#&gt;  [9] holocene        lower riverbank lower laguna    lower laguna   
#&gt; [13] holocene        holocene        upper modesto   upper modesto  
#&gt; [17] upper modesto   upper modesto  
#&gt; 6 Levels: holocene lower modesto upper modesto ... lower laguna</div><div class='input'>
<span class='co'># get using "unknown" expression:</span>
<span class='co'>#  "2nd + 3rd horizon column names"</span>
<span class='kw'>for</span>(<span class='no'>i</span> <span class='kw'>in</span> <span class='fu'><a href='horizonNames.html'>horizonNames</a></span>(<span class='no'>sp2</span>)[<span class='fl'>2</span>:<span class='fl'>3</span>])
 <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>sp2</span><span class='kw'>[[</span><span class='no'>i</span>]])</div><div class='output co'>#&gt;   [1]   0  12  16  25  49  85  95 122 140   0  22  40  86 132 150 205   0  18
#&gt;  [19]  45  94 125 145 179   0  24  33  50  62  86 102 123 157 208 245 266   0
#&gt;  [37]  28  39  59  76 111 126 150 200 260   0  18  24  76 100 160 201 208   0
#&gt;  [55]  19  30  90 113 170 190 240   0   7  24  63  91 126 176 218 246 268 300
#&gt;  [73] 320   0   4  32  61  92 103   0  11  30  60 114 191 223 260   0  11  33
#&gt;  [91]  46  71  93 119 148 197 274 315 473   0  23  43  59  89 120 154 207 270
#&gt; [109] 342 455 505   0   4  16  31  54   0  17  32  49  86 113   0  13  23  54
#&gt; [127]  88 102 141   0  10  22  43  91 118 157   0   8  30  54  88 118 180 230
#&gt; [145] 290 340   0   7  34  57  90 126 191 240
#&gt;   [1]   12   16   25   49   85   95  122  140  170   22   40   86  132  150  205
#&gt;  [16]  225   18   45   94  125  145  179  220   24   33   50   62   86  102  123
#&gt;  [31]  157  208  245  266  301   28   39   59   76  111  126  150  200  260  320
#&gt;  [46]   18   24   76  100  160  201  208  295   19   30   90  113  170  190  240
#&gt;  [61]  300    7   24   63   91  126  176  218  246  268  300  320  410    4   32
#&gt;  [76]   61   92  103  130   11   30   60  114  191  223  260  283   11   33   46
#&gt;  [91]   71   93  119  148  197  274  315  473 1300   23   43   59   89  120  154
#&gt; [106]  207  270  342  455  505 1300    4   16   31   54   78   17   32   49   86
#&gt; [121]  113  147   13   23   54   88  102  141  180   10   22   43   91  118  157
#&gt; [136]  184    8   30   54   88  118  180  230  290  340  370    7   34   57   90
#&gt; [151]  126  191  240  390</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>sp5</span>)

<span class='co'># some column names to work with</span>
<span class='no'>rgb.columns</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"R25"</span>,<span class='st'>"G25"</span>,<span class='st'>"B25"</span>)



<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span>(<span class='no'>rgb.columns</span>, <span class='kw'>function</span>(<span class='no'>x</span>) {

  <span class='co'># [[ allows you to access column names in a loop</span>
  <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span>(<span class='no'>sp5</span><span class='kw'>[[</span><span class='no'>x</span>]] * <span class='fl'>255</span>)

})

<span class='co'># rename scaled results</span>
<span class='fu'><a href='names.html'>names</a></span>(<span class='no'>res</span>) <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='no'>rgb.columns</span>,<span class='st'>"_scl"</span>)

<span class='co'># add horizon ID to results</span>
<span class='no'>result</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='kw'>hzID</span> <span class='kw'>=</span> <span class='fu'><a href='hzID.html'>hzID</a></span>(<span class='no'>sp5</span>), <span class='fu'><a href='https://rdrr.io/r/base/do.call.html'>do.call</a></span>(<span class='st'>'cbind'</span>, <span class='no'>res</span>))
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>result</span>)</div><div class='output co'>#&gt;   hzID R25_scl G25_scl B25_scl
#&gt; 1    1     105      97      87
#&gt; 2    2      79      71      64
#&gt; 3    3      79      71      64
#&gt; 4    4      79      71      64
#&gt; 5    5     140     117      92
#&gt; 6    6     110      94      76</div><div class='input'>
<span class='co'># join result back into horizons</span>
<span class='fu'><a href='horizons.html'>horizons</a></span>(<span class='no'>sp5</span>) <span class='kw'>&lt;-</span> <span class='no'>result</span></div><div class='output co'>#&gt; <span class='message'>join condition resulted in sorting of horizons, re-applying original order</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


