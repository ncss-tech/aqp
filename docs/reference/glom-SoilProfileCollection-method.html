<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Subset soil horizon data using a depth or depth interval — glom,SoilProfileCollection-method • aqp</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Subset soil horizon data using a depth or depth interval — glom,SoilProfileCollection-method" />
<meta property="og:description" content="glom() returns a &quot;clod&quot; of horizons from a single profile SoilProfileCollection that have depth (range) in common.
All horizons included within the specified interval are returned in their entirety (not just the portion within the interval), unless the truncate argument is specified. Horizon intersection is based on unique ID hzidname(spc) and attribute of interest.
If intersection at the specified boundaries ['z1', 'z2'] results in no horizon data, 'NULL' is returned with a warning containing the offending pedon ID.
If inverting results with invert, it is possible that thick horizons (that span more than the entire glom interval) will be split into two horizons. This may make the results from ids = TRUE different from what you expect, as they will be based on a profile with an &quot;extra&quot; horizon.
If the upper or lower bound is less than or greater than the shallowest top depth or deepest bottom depth, respectively, a warning is issued, but the horizons within the interval are returned as usual. Users can handle the possibility of incomplete results using evalMissingData or similar approach. While these warnings can make for messy standard output, it is felt by the author that users need to consciously &quot;choose&quot; to ignore (e.g. via suppressWarnings) this output. Most commonly these warning occurs when calling glom on a SPC that is impractical to inspect via glomApply, so it may be the only warning of a potential problem in a downstream analysis." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aqp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ncss-tech/aqp/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Subset soil horizon data using a depth or depth interval</h1>
    <small class="dont-index">Source: <a href='https://github.com/ncss-tech/aqp/blob/master/R/glom.R'><code>R/glom.R</code></a></small>
    <div class="hidden name"><code>glom-SoilProfileCollection-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>glom()</code> returns a "clod" of horizons from a single profile SoilProfileCollection that have depth (range) in common.</p>
<p>All horizons included within the specified interval are returned in their entirety (not just the portion within the interval), unless the <code>truncate</code> argument is specified. Horizon intersection is based on unique ID <code><a href='hzidname<-.html'>hzidname(spc)</a></code> and attribute of interest.</p>
<p>If intersection at the specified boundaries <code>['z1', 'z2']</code> results in no horizon data, 'NULL' is returned with a warning containing the offending pedon ID.</p>
<p>If inverting results with <code>invert</code>, it is possible that thick horizons (that span more than the entire glom interval) will be split into two horizons. This may make the results from <code>ids = TRUE</code> different from what you expect, as they will be based on a profile with an "extra" horizon.</p>
<p>If the upper or lower bound is less than or greater than the shallowest top depth or deepest bottom depth, respectively, a warning is issued, but the horizons within the interval are returned as usual. Users can handle the possibility of incomplete results using <code>evalMissingData</code> or similar approach. While these warnings can make for messy standard output, it is felt by the author that users need to consciously "choose" to ignore (e.g. via <code>suppressWarnings</code>) this output. Most commonly these warning occurs when calling <code>glom</code> on a SPC that is impractical to inspect via <code>glomApply</code>, so it may be the only warning of a potential problem in a downstream analysis.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for SoilProfileCollection</span>
<span class='fu'>glom</span><span class='op'>(</span>
  <span class='va'>p</span>,
  <span class='va'>z1</span>,
  z2 <span class='op'>=</span> <span class='cn'>NA</span>,
  ids <span class='op'>=</span> <span class='cn'>FALSE</span>,
  df <span class='op'>=</span> <span class='cn'>FALSE</span>,
  truncate <span class='op'>=</span> <span class='cn'>FALSE</span>,
  invert <span class='op'>=</span> <span class='cn'>FALSE</span>,
  modality <span class='op'>=</span> <span class='st'>"all"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>p</th>
      <td><p>A single-profile SoilProfileCollection; usually <code>glom</code> is called via <code><a href='profileApply.html'>profileApply()</a></code> e.g. via convenience method <code>glomApply</code></p></td>
    </tr>
    <tr>
      <th>z1</th>
      <td><p>Top depth (required) - depth to intersect horizon; if 'z2' specified, top depth of intersect interval.</p></td>
    </tr>
    <tr>
      <th>z2</th>
      <td><p>OPTIONAL: Bottom depth - bottom depth of intersection interval</p></td>
    </tr>
    <tr>
      <th>ids</th>
      <td><p>Return just horizon IDs in interval? default: FALSE</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>Return a data.frame, by intersection with <code><a href='horizons.html'>horizons(p)</a></code>? default: FALSE</p></td>
    </tr>
    <tr>
      <th>truncate</th>
      <td><p>Truncate horizon top and bottom depths to <code>z1</code> and <code>z2</code>? default: FALSE</p></td>
    </tr>
    <tr>
      <th>invert</th>
      <td><p>Get the horizons/depth ranges of the profile outside the interval z1/z2? default: FALSE</p></td>
    </tr>
    <tr>
      <th>modality</th>
      <td><p>Return all data (default: <code>"all"</code>) or first, thickest (<code>modality = "thickest"</code>) horizon in interval. This can be a way of flattening a many:1 relationship over a depth interval applied to a set of profiles.)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A SoilProfileCollection, data.frame, or a vector of horizon IDs. <code>NULL</code> if no result.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The verb/function that creates a clod is "glom". "To glom" is "to steal" or to "become stuck or attached to". The word is related to the compound "glomalin", which is a glycoprotein produced by mycorrhizal fungi in soil.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='glomApply.html'>glomApply</a></code> <code><a href='trunc,SoilProfileCollection-method.html'>trunc</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Andrew G. Brown</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>sp1</span>, package <span class='op'>=</span> <span class='st'>'aqp'</span><span class='op'>)</span>
<span class='fu'>depths</span><span class='op'>(</span><span class='va'>sp1</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>id</span> <span class='op'>~</span> <span class='va'>top</span> <span class='op'>+</span> <span class='va'>bottom</span>
<span class='fu'><a href='site.html'>site</a></span><span class='op'>(</span><span class='va'>sp1</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='op'>~</span> <span class='va'>group</span>

<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='va'>sp1</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>

<span class='va'>foo</span> <span class='op'>&lt;-</span> <span class='fu'>glom</span><span class='op'>(</span><span class='va'>p</span>, <span class='fl'>25</span>, <span class='fl'>100</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Lower boundary `z2` (100) is deeper than bottom depth of deepest horizon (89) in subset. (id: P001)</span></div><div class='input'>
<span class='co'># there are 4 horizons in the clod glommed from depths 25 to 100 on profile 1 in sp1</span>
<span class='fu'><a href='nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>foo</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 4</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


