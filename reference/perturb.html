<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Perturb soil horizon depths using boundary distinctness — perturb • aqp</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Perturb soil horizon depths using boundary distinctness — perturb"><meta property="og:description" content='"Perturbs" the boundary between horizons or the thickness of horizons using a standard deviation specified as a horizon-level attribute. This is selected using either boundary.attr or thickness.attr to specify the column name.
The boundary standard deviation corresponds roughly to the concept of "horizon boundary distinctness." In contrast, the horizon thickness standard deviation corresponds roughly to the "variation in horizon thickness" so it may be determined from several similar profiles that have a particular layer "in common."'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aqp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Introduction-to-SoilProfileCollection-Objects.html">Introduction to SoilProfileCollection Objects</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ncss-tech/aqp/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perturb soil horizon depths using boundary distinctness</h1>
    <small class="dont-index">Source: <a href="https://github.com/ncss-tech/aqp/blob/HEAD/R/perturb.R" class="external-link"><code>R/perturb.R</code></a></small>
    <div class="hidden name"><code>perturb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>"Perturbs" the <strong>boundary between horizons</strong> or the <strong>thickness of horizons</strong> using a standard deviation specified as a horizon-level attribute. This is selected using either <code>boundary.attr</code> or <code>thickness.attr</code> to specify the column name.</p>
<p>The boundary standard deviation corresponds roughly to the concept of "horizon boundary distinctness." In contrast, the <em>horizon thickness</em> standard deviation corresponds roughly to the "variation in horizon thickness" so it may be determined from several similar profiles that have a particular layer "in common."</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">perturb</span><span class="op">(</span></span>
<span>  <span class="va">p</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  thickness.attr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boundary.attr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min.thickness <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max.depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new.idname <span class="op">=</span> <span class="st">"pID"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>p</dt>
<dd><p>A SoilProfileCollection</p></dd>


<dt>n</dt>
<dd><p>Number of new profiles to generate (default: <code>100</code>) per profile in <code>p</code></p></dd>


<dt>id</dt>
<dd><p>a vector of profile IDs with length equal to (<code>n</code>). Overrides use of <code>seq_len(n)</code> as default profile ID values.</p></dd>


<dt>thickness.attr</dt>
<dd><p>Horizon variance attribute containing numeric "standard deviations" reflecting horizon thickness</p></dd>


<dt>boundary.attr</dt>
<dd><p>Horizon variance attribute containing numeric "standard deviations" reflecting boundary transition distinctness</p></dd>


<dt>min.thickness</dt>
<dd><p>Minimum thickness of permuted horizons (default: <code>1</code>)</p></dd>


<dt>max.depth</dt>
<dd><p>Depth below which horizon depths are not perturbed (default: <code>NULL</code>)</p></dd>


<dt>new.idname</dt>
<dd><p>New column name to contain unique profile ID (default: <code>pID</code>)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a SoilProfileCollection with <code>n</code> realizations of each profile in <code>p</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Imagine a Normal curve with mean centered on the vertical (depth axis) at a representative value (RV) horizon bottom depth or thickness. By the Empirical Rule for Normal distribution, two "standard deviations" above or below that "central" mean value represent 95% of the "typical volume" of that horizon or boundary.</p>
<p><code>perturb()</code> can leverage semi-quantitative (ordered factor) levels of boundary distinctness/topography for the upper and lower boundary of individual horizons. A handy function for this is <code><a href="hzDistinctnessCodeToOffset.html">hzDistinctnessCodeToOffset()</a></code>. The <code>boundary.attr</code> is arguably easier to parameterize from a single profile description or "Form 232" where <em>horizon boundary distinctness</em> classes (based on vertical distance of transition) are conventionally recorded for each layer.</p>
<p>Alternately, <code>perturb()</code> can be parameterized using standard deviation in thickness of layers derived from a group. Say, the variance parameters are defined from a set of pedons correlated to a particular series or component, and the template "seed" profile is, for example, the Official Series Description or the Representative Component Pedon.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="random_profile.html">random_profile()</a></code> <code><a href="hzDistinctnessCodeToOffset.html">hzDistinctnessCodeToOffset()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>D.E. Beaudette, A.G. Brown</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### THICKNESS</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># load sample data and convert into SoilProfileCollection</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sp3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="depths.html">depths</a></span><span class="op">(</span><span class="va">sp3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">id</span> <span class="op">~</span> <span class="va">top</span> <span class="op">+</span> <span class="va">bottom</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># select a profile to use as the basis for simulation</span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va">sp3</span><span class="op">[</span><span class="fl">3</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reset horizon names</span></span></span>
<span class="r-in"><span><span class="va">s</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">'H'</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">s</span><span class="op">$</span><span class="va">name</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simulate 25 new profiles</span></span></span>
<span class="r-in"><span><span class="fu"><a href="horizons.html">horizons</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">$</span><span class="va">hz.sd</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># constant standard deviation</span></span></span>
<span class="r-in"><span><span class="va">sim.1</span> <span class="op">&lt;-</span> <span class="fu">perturb</span><span class="op">(</span><span class="va">s</span>, n <span class="op">=</span> <span class="fl">25</span>, thickness.attr <span class="op">=</span> <span class="st">"hz.sd"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># simulate 25 new profiles using different SD for each horizon</span></span></span>
<span class="r-in"><span><span class="fu"><a href="horizons.html">horizons</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">$</span><span class="va">hz.sd</span> <span class="op">&lt;-</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim.2</span> <span class="op">&lt;-</span> <span class="fu">perturb</span><span class="op">(</span><span class="va">s</span>, n <span class="op">=</span> <span class="fl">25</span>, thickness.attr <span class="op">=</span> <span class="st">"hz.sd"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="SoilProfileCollection-plotting-methods.html">plot</a></span><span class="op">(</span><span class="va">sim.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">'SD = 2'</span>,</span></span>
<span class="r-in"><span>  side <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  line <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span>,</span></span>
<span class="r-in"><span>  font <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  cex <span class="op">=</span> <span class="fl">0.75</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="SoilProfileCollection-plotting-methods.html">plot</a></span><span class="op">(</span><span class="va">sim.2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">'SD = c(1, 2, 5, 5, 5, 10, 3)'</span>,</span></span>
<span class="r-in"><span>  side <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  line <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span>,</span></span>
<span class="r-in"><span>  font <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  cex <span class="op">=</span> <span class="fl">0.75</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="perturb-1.png" alt="" width="768" height="475"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># aggregate horizonation of simulated data</span></span></span>
<span class="r-in"><span><span class="co"># note: set class_prob_mode=2 as profiles were not defined to a constant depth</span></span></span>
<span class="r-in"><span><span class="va">sim.2</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">sim.2</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="slab.html">slab</a></span><span class="op">(</span><span class="va">sim.2</span>, <span class="op">~</span> <span class="va">name</span>, cpm<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># convert to long format for plotting simplicity</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">a.long</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               id.vars <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'top'</span>, <span class="st">'bottom'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                measure.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">sim.2</span><span class="op">$</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot horizon probabilities derived from simulated data</span></span></span>
<span class="r-in"><span><span class="co"># dashed lines are the original horizon boundaries</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://lattice.r-forge.r-project.org/" class="external-link">lattice</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">top</span> <span class="op">~</span> <span class="va">value</span>,</span></span>
<span class="r-in"><span>  groups <span class="op">=</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">a.long</span>,</span></span>
<span class="r-in"><span>  subset <span class="op">=</span> <span class="va">value</span> <span class="op">&gt;</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">100</span>,<span class="op">-</span><span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'l'</span>, <span class="st">'g'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  asp <span class="op">=</span> <span class="fl">1.5</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">'Probability'</span>,</span></span>
<span class="r-in"><span>  auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    columns <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    lines <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    points <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  panel <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.xyplot.html" class="external-link">panel.xyplot</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.functions.html" class="external-link">panel.abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="va">s</span><span class="op">$</span><span class="va">top</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="perturb-2.png" alt="" width="768" height="475"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### BOUNDARIES</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example with sp1 (using boundary distinctness)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sp1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="depths.html">depths</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">id</span> <span class="op">~</span> <span class="va">top</span> <span class="op">+</span> <span class="va">bottom</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specify "standard deviation" for boundary thickness</span></span></span>
<span class="r-in"><span><span class="co">#   consider a normal curve centered at boundary RV depth</span></span></span>
<span class="r-in"><span><span class="co"># lookup table: ~maximum thickness of boundary distinctness classes, divided by 3</span></span></span>
<span class="r-in"><span><span class="va">bound.lut</span> <span class="op">&lt;-</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'V'</span><span class="op">=</span><span class="fl">0.5</span>,<span class="st">'A'</span><span class="op">=</span><span class="fl">2</span>,<span class="st">'C'</span><span class="op">=</span><span class="fl">5</span>,<span class="st">'G'</span><span class="op">=</span><span class="fl">15</span>,<span class="st">'D'</span><span class="op">=</span><span class="fl">45</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## V          A          C          G          D</span></span></span>
<span class="r-in"><span><span class="co">## 0.1666667  0.6666667  1.6666667  5.0000000 15.0000000</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_sd</span> <span class="op">&lt;-</span> <span class="va">bound.lut</span><span class="op">[</span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_distinct</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># hold any NA boundary distinctness constant</span></span></span>
<span class="r-in"><span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_sd</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_sd</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_sd</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0%       25%       50%       75%      100% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.0000000 0.0000000 0.6666667 0.6666667 1.6666667 </span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="va">sp1</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># assume boundary sd is 1/12 midpoint of horizon depth</span></span></span>
<span class="r-in"><span><span class="co"># (i.e. general relationship: SD increases (less well known) with depth)</span></span></span>
<span class="r-in"><span><span class="va">sp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform</a></span><span class="op">(</span><span class="va">sp1</span>, midpt <span class="op">=</span> <span class="op">(</span><span class="va">bottom</span> <span class="op">-</span> <span class="va">top</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span> <span class="op">+</span> <span class="va">top</span>, bound_sd <span class="op">=</span> <span class="va">midpt</span> <span class="op">/</span> <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">$</span><span class="va">bound_sd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0%         25%         50%         75%        100% </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.08333333  0.92708333  3.75000000  9.25000000 19.41666667 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">perturb</span><span class="op">(</span><span class="va">p</span>, boundary.attr <span class="op">=</span> <span class="st">"bound_sd"</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SoilProfileCollection with 10 profiles and 50 horizons</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> profile ID: id  |  horizon ID: hzID </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Depth range: 62 - 70 cm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Horizons (6 / 50 rows  |  10 / 20 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id hzID top bottom group bound_distinct bound_topography name texture</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01    1   0      3     2              C                W Oa/A      SL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01    2   3     12     2              G                S   AB     SCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01    3  12     34     2              G                S   BA     SCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01    4  34     54     2              C                S  Bt1  GRVSCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01    5  54     69     2              G                S  Bt2    GRVC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-02    6   0      2     2              C                W Oa/A      SL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  prop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [... more horizons ...]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Sites (6 / 10 rows  |  2 / 2 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       id .oldID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-01   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-02   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-03   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-04   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-05   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-06   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [... more sites ...]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [EMPTY]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Custom IDs</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s-%03d"</span>, <span class="fu"><a href="profile_id.html">profile_id</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="fu">perturb</span><span class="op">(</span><span class="va">p</span>, boundary.attr <span class="op">=</span> <span class="st">"bound_sd"</span>, id <span class="op">=</span> <span class="va">ids</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SoilProfileCollection with 10 profiles and 50 horizons</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> profile ID: id  |  horizon ID: hzID </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Depth range: 65 - 69 cm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Horizons (6 / 50 rows  |  10 / 20 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id hzID top bottom group bound_distinct bound_topography name texture</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001    1   0      2     2              C                W Oa/A      SL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001    2   2     12     2              G                S   AB     SCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001    3  12     32     2              G                S   BA     SCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001    4  32     54     2              C                S  Bt1  GRVSCL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001    5  54     69     2              G                S  Bt2    GRVC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-002    6   0      3     2              C                W Oa/A      SL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  prop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [... more horizons ...]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----- Sites (6 / 10 rows  |  2 / 2 columns) -----</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id .oldID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-001   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-002   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-003   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-004   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-005   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  P003-006   P003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [... more sites ...]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Spatial Data:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [EMPTY]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

