<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Soil Profile Color Signatures — soilColorSignature • aqp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Soil Profile Color Signatures — soilColorSignature"><meta name="description" content="Generate a color signature for each soil profile in a collection."><meta property="og:description" content="Generate a color signature for each soil profile in a collection."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">aqp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/aqp-overview.html">An Overview of the aqp Package</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction-to-SoilProfileCollection-Objects.html">Introduction to SoilProfileCollection Objects</a></li>
    <li><a class="dropdown-item" href="../articles/label-placement.html">Overlapping Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/missing-data.html">Missing Data</a></li>
    <li><a class="dropdown-item" href="../articles/Munsell-color-conversion.html">Munsell Color Conversion</a></li>
    <li><a class="dropdown-item" href="../articles/NCSP.html">Numerical Classification of Soil Profiles</a></li>
    <li><a class="dropdown-item" href="../articles/new-in-aqp-2.html">What is new in aqp 2.x?</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncss-tech/aqp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Soil Profile Color Signatures</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncss-tech/aqp/blob/master/R/soilColorSignature.R" class="external-link"><code>R/soilColorSignature.R</code></a></small>
      <div class="d-none name"><code>soilColorSignature.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generate a color signature for each soil profile in a collection.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">soilColorSignature</span><span class="op">(</span></span>
<span>  <span class="va">spc</span>,</span>
<span>  <span class="va">color</span>,</span>
<span>  space <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">"sRGB"</span>, <span class="st">"CIELAB"</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">"colorBucket"</span>, <span class="st">"depthSlices"</span>, <span class="st">"pam"</span><span class="op">)</span>,</span>
<span>  perceptualDistMat <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pam.k <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  prob <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>  useProportions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pigmentNames <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">".white.pigment"</span>, <span class="st">".red.pigment"</span>, <span class="st">".green.pigment"</span>, <span class="st">".yellow.pigment"</span>,</span>
<span>    <span class="st">".blue.pigment"</span><span class="op">)</span>,</span>
<span>  apply.fun <span class="op">=</span> <span class="va">lapply</span>,</span>
<span>  r <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  g <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  b <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  RescaleLightnessBy <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-spc">spc<a class="anchor" aria-label="anchor" href="#arg-spc"></a></dt>
<dd><p>a <code>SoilProfileCollection</code> object</p></dd>


<dt id="arg-color">color<a class="anchor" aria-label="anchor" href="#arg-color"></a></dt>
<dd><p>horizon-level attributes, either character of length 1 specifying a column containing Munsell or sRGB in hex notation, or character vector of three column names containing either sRGB or CIELAB color coordinates. sRGB color coordinates should be within the range of 0 to 1.</p></dd>


<dt id="arg-space">space<a class="anchor" aria-label="anchor" href="#arg-space"></a></dt>
<dd><p>character, either 'sRGB' or 'LAB', specifying color space</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>algorithm used to compute color signature, <code>colorBucket</code>, <code>depthSlices</code>, or <code>pam</code></p></dd>


<dt id="arg-perceptualdistmat">perceptualDistMat<a class="anchor" aria-label="anchor" href="#arg-perceptualdistmat"></a></dt>
<dd><p>logical, optionally return a distance matrix based on perceptual color distances, when “method` is one of 'depthSlices' or 'pam', see Details</p></dd>


<dt id="arg-pam-k">pam.k<a class="anchor" aria-label="anchor" href="#arg-pam-k"></a></dt>
<dd><p>number of color classes for <code>method = 'pam'</code></p></dd>


<dt id="arg-prob">prob<a class="anchor" aria-label="anchor" href="#arg-prob"></a></dt>
<dd><p>numeric vector, requested percentiles for <code>method = 'depthSlices'</code></p></dd>


<dt id="arg-useproportions">useProportions<a class="anchor" aria-label="anchor" href="#arg-useproportions"></a></dt>
<dd><p>use proportions or quantities, see details</p></dd>


<dt id="arg-pigmentnames">pigmentNames<a class="anchor" aria-label="anchor" href="#arg-pigmentnames"></a></dt>
<dd><p>names for resulting pigment proportions or quantities</p></dd>


<dt id="arg-apply-fun">apply.fun<a class="anchor" aria-label="anchor" href="#arg-apply-fun"></a></dt>
<dd><p>function passed to <code>aqp::profileApply(APPLY.FUN)</code> argument, can be used to add progress bars via <code>pbapply::pblapply()</code>, or parallel processing with <code>furrr::future_map()</code></p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>deprecated, use <code>color</code> argument</p></dd>


<dt id="arg-g">g<a class="anchor" aria-label="anchor" href="#arg-g"></a></dt>
<dd><p>deprecated, use <code>color</code> argument</p></dd>


<dt id="arg-b">b<a class="anchor" aria-label="anchor" href="#arg-b"></a></dt>
<dd><p>deprecated, use <code>color</code> argument</p></dd>


<dt id="arg-rescalelightnessby">RescaleLightnessBy<a class="anchor" aria-label="anchor" href="#arg-rescalelightnessby"></a></dt>
<dd><p>deprecated, scaling factor for CIELAB L-coordinate</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For the <code>colorBucket</code> method, a <code>data.frame</code>:</p><ul><li><p>id column: set according to <code>idname(spc)</code></p></li>
<li><p><code>.white.pigment</code>: proportion or quantity of CIELAB L-values</p></li>
<li><p><code>.red.pigment</code>: proportion or quantity of CIELAB positive A-values</p></li>
<li><p><code>.green.pigment</code>: proportion or quantity of CIELAB negative A-values</p></li>
<li><p><code>.yellow.pigment</code>: proportion or quantity of CIELAB positive B-values</p></li>
<li><p><code>.blue.pigment</code>: proportion or quantity of CIELAB negative B-values</p></li>
</ul><p>Column names can be adjusted with the <code>pigmentNames</code> argument.</p>
<p>For the <code>depthSlices</code> method, a <code>data.frame</code>:</p><ul><li><p>id column: set according to <code>idname(spc)</code></p></li>
<li><p><code>L.1</code>, <code>A.1</code>, <code>B.1</code>: CIELAB color coordinates associated with the first depth slice, at depth percentile given in <code>prob[1]</code></p></li>
<li><p>...</p></li>
<li><p><code>L.n</code>, <code>A.n</code>, <code>B.n</code>: CIELAB color coordinates associated with the <code>n</code> depth slice, at depth percentile given in <code>prob[n]</code></p></li>
</ul><p>For the <code>pam</code> method, a <code>data.frame</code>:</p><ul><li><p>id column: set according to <code>idname(spc)</code></p></li>
<li><p><code>L.1</code>, <code>A.1</code>, <code>B.1</code>: CIELAB color coordinates associated with the first color cluster, after sorting all clusters in ascending order along L, A, B axes.</p></li>
<li><p>...</p></li>
<li><p><code>L.n</code>, <code>A.n</code>, <code>B.n</code>: CIELAB color coordinates associated with the <code>nth</code> color cluster, after sorting all clusters in ascending order along L, A, B axes.</p></li>
</ul><p>When <code>perceptualDistMat = TRUE</code> and <code>method</code> is one of 'depthSlices' or 'pam', a distance matrix is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Interpreation of color signature.</p>
<p>Choices related to weighting, scaling, and distance metric.</p>
<p>Perceptual distances (dE00), summed over color groups.</p>
<p>See the <a href="http://ncss-tech.github.io/AQP/aqp/soil-color-signatures.html" class="external-link">related tutorial</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>https://en.wikipedia.org/wiki/Lab_color_space</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="plotProfileDendrogram.html">plotProfileDendrogram()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>D.E. Beaudette</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># trivial example, not very interesting</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="depths.html">depths</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">id</span> <span class="op">~</span> <span class="va">top</span> <span class="op">+</span> <span class="va">bottom</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Munsell notation</span></span></span>
<span class="r-in"><span><span class="va">sp1</span><span class="op">$</span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%s %s/%s"</span>, <span class="va">sp1</span><span class="op">$</span><span class="va">hue</span>, <span class="va">sp1</span><span class="op">$</span><span class="va">value</span>, <span class="va">sp1</span><span class="op">$</span><span class="va">chroma</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># extract color signature</span></span></span>
<span class="r-in"><span><span class="va">pig</span> <span class="op">&lt;-</span> <span class="fu">soilColorSignature</span><span class="op">(</span><span class="va">sp1</span>, color <span class="op">=</span> <span class="st">'m'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown, Stephen Roecker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

