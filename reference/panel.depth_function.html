<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Lattice Panel Function for Soil Profiles — panel.depth_function • aqp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lattice Panel Function for Soil Profiles — panel.depth_function"><meta name="description" content="Panel function for plotting grouped soil property data, along with upper and
lower estimates of uncertainty.
This function can be used to replace panel.superpose when plotting
depth function data. When requested, contributing fraction data are printed
using colors the same color as corresponding depth function lines unless a
single color value is given via cf.col.
This function is not able to apply transformations (typically log = 10) applied in the scales argument to xyplot to  upper/lower bounds. These will have to be manually applied. See examples."><meta property="og:description" content="Panel function for plotting grouped soil property data, along with upper and
lower estimates of uncertainty.
This function can be used to replace panel.superpose when plotting
depth function data. When requested, contributing fraction data are printed
using colors the same color as corresponding depth function lines unless a
single color value is given via cf.col.
This function is not able to apply transformations (typically log = 10) applied in the scales argument to xyplot to  upper/lower bounds. These will have to be manually applied. See examples."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">aqp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2-1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/aqp-overview.html">An Overview of the aqp Package</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction-to-SoilProfileCollection-Objects.html">Introduction to SoilProfileCollection Objects</a></li>
    <li><a class="dropdown-item" href="../articles/label-placement.html">Overlapping Annotation</a></li>
    <li><a class="dropdown-item" href="../articles/missing-data.html">Missing Data</a></li>
    <li><a class="dropdown-item" href="../articles/Munsell-color-conversion.html">Munsell Color Conversion</a></li>
    <li><a class="dropdown-item" href="../articles/NCSP.html">Numerical Classification of Soil Profiles</a></li>
    <li><a class="dropdown-item" href="../articles/new-in-aqp-2.html">What is new in aqp 2.x?</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncss-tech/aqp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Lattice Panel Function for Soil Profiles</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncss-tech/aqp/blob/master/R/panel.depth_function.R" class="external-link"><code>R/panel.depth_function.R</code></a>, <a href="https://github.com/ncss-tech/aqp/blob/master/R/prepanel.depth_function.R" class="external-link"><code>R/prepanel.depth_function.R</code></a></small>
      <div class="d-none name"><code>panel.depth_function.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Panel function for plotting grouped soil property data, along with upper and
lower estimates of uncertainty.</p>
<p>This function can be used to replace <code>panel.superpose</code> when plotting
depth function data. When requested, contributing fraction data are printed
using colors the same color as corresponding depth function lines unless a
single color value is given via <code>cf.col</code>.</p>
<p>This function is not able to apply transformations (typically <code>log = 10</code>) applied in the <code>scales</code> argument to <code>xyplot</code> to  upper/lower bounds. These will have to be manually applied. See examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">panel.depth_function</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">id</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  subscripts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sync.colors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cf <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cf.col <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  cf.interval <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">prepanel.depth_function</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  upper <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  lower <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">subscripts</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>x values (generated by calling lattice function)</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>y values (generated by calling lattice function)</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>vector of id labels, same length as x and y–only required when
plotting segments (see Details section)</p></dd>


<dt id="arg-upper">upper<a class="anchor" aria-label="anchor" href="#arg-upper"></a></dt>
<dd><p>vector of upper confidence envelope values</p></dd>


<dt id="arg-lower">lower<a class="anchor" aria-label="anchor" href="#arg-lower"></a></dt>
<dd><p>vector of lower confidence envelope values</p></dd>


<dt id="arg-subscripts">subscripts<a class="anchor" aria-label="anchor" href="#arg-subscripts"></a></dt>
<dd><p>paneling indices (generated by calling lattice function)</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>grouping data (generated by calling lattice function)</p></dd>


<dt id="arg-sync-colors">sync.colors<a class="anchor" aria-label="anchor" href="#arg-sync-colors"></a></dt>
<dd><p>optionally sync the fill color within the region bounded
by (lower–upper) with the line colors</p></dd>


<dt id="arg-cf">cf<a class="anchor" aria-label="anchor" href="#arg-cf"></a></dt>
<dd><p>optionally annotate contributing fraction data at regular depth
intervals see <code><a href="slab.html">slab</a></code></p></dd>


<dt id="arg-cf-col">cf.col<a class="anchor" aria-label="anchor" href="#arg-cf-col"></a></dt>
<dd><p>optional color for contributing fraction values, typically
used to override the line color</p></dd>


<dt id="arg-cf-interval">cf.interval<a class="anchor" aria-label="anchor" href="#arg-cf-interval"></a></dt>
<dd><p>number of depth units to space printed contributing
fraction values</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>further arguments to lower-level lattice plotting functions,
see below</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="sp1.html">sp1</a></code>, <code><a href="slice.html">slice</a></code>, <code><a href="slab.html">slab</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>D.E. Beaudette</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lattice.r-forge.r-project.org/" class="external-link">lattice</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1. plotting mechanism for step-functions derived from soil profile data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">prop</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">sp1</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">sp1</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>  panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">'Property'</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">'panel.depth_function() demo'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="panel.depth_function-1.png" alt="" width="700" height="1133"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1.1 include groups argument to leverage lattice styling framework</span></span></span>
<span class="r-in"><span><span class="va">sp1</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">sp1</span><span class="op">$</span><span class="va">group</span>, labels <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'Group 1'</span>, <span class="st">'Group2'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">prop</span>,</span></span>
<span class="r-in"><span>  groups <span class="op">=</span> <span class="va">group</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">sp1</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="va">sp1</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>  panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">250</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">'Property'</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">'panel.depth_function() demo'</span>,</span></span>
<span class="r-in"><span>  auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    columns <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>    points <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>    lines <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'Orange'</span>, <span class="st">'RoyalBlue'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="panel.depth_function-2.png" alt="" width="700" height="1133"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># more complex examples, using step functions with grouped data</span></span></span>
<span class="r-in"><span><span class="co"># better looking figures with less customization via tactile package</span></span></span>
<span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">'tactile'</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lattice.r-forge.r-project.org/" class="external-link">lattice</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jolars/tactile" class="external-link">tactile</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># example data</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sp6</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># a single profile</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">sp6</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># wide -&gt; long format</span></span></span>
<span class="r-in"><span>  <span class="va">x.long</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    id.vars <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'id'</span>, <span class="st">'top'</span>, <span class="st">'bottom'</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    measure.vars <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'sand'</span>, <span class="st">'silt'</span>, <span class="st">'clay'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># (optional) convert back to data.frame</span></span></span>
<span class="r-in"><span>  <span class="va">x.long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x.long</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># three variables sharing a common axis</span></span></span>
<span class="r-in"><span>  <span class="co"># factor levels set by melt()</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span> <span class="op">|</span> <span class="va">id</span>,</span></span>
<span class="r-in"><span>    groups <span class="op">=</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">x.long</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="va">x.long</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alternating <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tactile/man/tactile.theme.html" class="external-link">tactile.theme</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">'Sand, Silt, Clay (%)'</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>    panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>    auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span>, lines <span class="op">=</span> <span class="cn">TRUE</span>, points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    asp <span class="op">=</span> <span class="fl">1.5</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># all profiles</span></span></span>
<span class="r-in"><span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">sp6</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># wide -&gt; long format</span></span></span>
<span class="r-in"><span>  <span class="va">x.long</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    id.vars <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'id'</span>, <span class="st">'top'</span>, <span class="st">'bottom'</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>    measure.vars <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">'sand'</span>, <span class="st">'silt'</span>, <span class="st">'clay'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># (optional) convert back to data.frame</span></span></span>
<span class="r-in"><span>  <span class="va">x.long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">x.long</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="co"># three variables sharing a common axis</span></span></span>
<span class="r-in"><span>  <span class="co"># factor levels set by melt()</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span> <span class="op">|</span> <span class="va">id</span>,</span></span>
<span class="r-in"><span>    groups <span class="op">=</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">x.long</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="va">x.long</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">70</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alternating <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tactile/man/tactile.theme.html" class="external-link">tactile.theme</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">'Sand, Silt, Clay (%)'</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>    panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>    auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span>, lines <span class="op">=</span> <span class="cn">TRUE</span>, points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    as.table <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span>,</span></span>
<span class="r-in"><span>    groups <span class="op">=</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">x.long</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="va">x.long</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">70</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alternating <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tactile/man/tactile.theme.html" class="external-link">tactile.theme</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">'Sand, Silt, Clay (%)'</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>    panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>    auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span>, lines <span class="op">=</span> <span class="cn">TRUE</span>, points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    as.table <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span> <span class="op">|</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    groups <span class="op">=</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">x.long</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="va">x.long</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">70</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alternating <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tactile/man/tactile.theme.html" class="external-link">tactile.theme</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">'Sand, Silt, Clay (%)'</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>    panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>    auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span>, lines <span class="op">=</span> <span class="cn">TRUE</span>, points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    as.table <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">top</span>, <span class="va">bottom</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span> <span class="op">|</span> <span class="va">variable</span>,</span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">x.long</span>,</span></span>
<span class="r-in"><span>    id <span class="op">=</span> <span class="va">x.long</span><span class="op">$</span><span class="va">id</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="op">-</span><span class="fl">5</span><span class="op">)</span>, xlim <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">70</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    scales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alternating <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tick.number <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    par.settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/tactile/man/tactile.theme.html" class="external-link">tactile.theme</a></span><span class="op">(</span>superpose.line <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlab <span class="op">=</span> <span class="st">'Sand, Silt, Clay (%)'</span>,</span></span>
<span class="r-in"><span>    ylab <span class="op">=</span> <span class="st">'Depth (cm)'</span>,</span></span>
<span class="r-in"><span>    panel <span class="op">=</span> <span class="va">panel.depth_function</span>,</span></span>
<span class="r-in"><span>    auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fl">3</span>, lines <span class="op">=</span> <span class="cn">TRUE</span>, points <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    as.table <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="panel.depth_function-3.png" alt="" width="700" height="1133"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown, Stephen Roecker.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

