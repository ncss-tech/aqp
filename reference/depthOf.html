<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get top or bottom depths of horizons matching a regular expression pattern — depthOf • aqp</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get top or bottom depths of horizons matching a regular expression pattern — depthOf"><meta property="og:description" content='The depthOf family of functions calculate depth of occurrence of a horizon designation pattern, or any other value that can be coerced to character and matched with a regular expression.
If you need all depths of occurrence for a particular pattern, depthOf is what you are looking for. minDepthOf and maxDepthOf are wrappers around depthOf that return the minimum and maximum depth. They are all set up to handle missing values and missing "contacts" with the target pattern.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aqp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/aqp-overview.html">An Overview of the aqp Package</a>
    </li>
    <li>
      <a href="../articles/Introduction-to-SoilProfileCollection-Objects.html">Introduction to SoilProfileCollection Objects</a>
    </li>
    <li>
      <a href="../articles/label-placement.html">Overlapping Annotation</a>
    </li>
    <li>
      <a href="../articles/missing-data.html">Missing Data</a>
    </li>
    <li>
      <a href="../articles/Munsell-color-conversion.html">Munsell Color Conversion</a>
    </li>
    <li>
      <a href="../articles/NCSP.html">Numerical Classification of Soil Profiles</a>
    </li>
    <li>
      <a href="../articles/new-in-aqp-2.html">What is new in aqp 2.x?</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ncss-tech/aqp/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get top or bottom depths of horizons matching a regular expression pattern</h1>
    <small class="dont-index">Source: <a href="https://github.com/ncss-tech/aqp/blob/master/R/depthOf.R" class="external-link"><code>R/depthOf.R</code></a></small>
    <div class="hidden name"><code>depthOf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>depthOf</code> family of functions calculate depth of occurrence of a horizon designation pattern, or any other value that can be coerced to character and matched with a regular expression.</p>
<p>If you need all depths of occurrence for a particular pattern, <code>depthOf</code> is what you are looking for. <code>minDepthOf</code> and <code>maxDepthOf</code> are wrappers around <code>depthOf</code> that return the minimum and maximum depth. They are all set up to handle missing values and missing "contacts" with the target pattern.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">depthOf</span><span class="op">(</span></span>
<span>  <span class="va">p</span>,</span>
<span>  <span class="va">pattern</span>,</span>
<span>  FUN <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  hzdesgn <span class="op">=</span> <span class="fu"><a href="hzdesgnname.html">hzdesgnname</a></span><span class="op">(</span><span class="va">p</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  no.contact.depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  no.contact.assigned <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">maxDepthOf</span><span class="op">(</span></span>
<span>  <span class="va">p</span>,</span>
<span>  <span class="va">pattern</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  hzdesgn <span class="op">=</span> <span class="fu"><a href="hzdesgnname.html">hzdesgnname</a></span><span class="op">(</span><span class="va">p</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  no.contact.depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  no.contact.assigned <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">minDepthOf</span><span class="op">(</span></span>
<span>  <span class="va">p</span>,</span>
<span>  <span class="va">pattern</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  hzdesgn <span class="op">=</span> <span class="fu"><a href="hzdesgnname.html">hzdesgnname</a></span><span class="op">(</span><span class="va">p</span>, required <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  no.contact.depth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  no.contact.assigned <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  simplify <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>a SoilProfileCollection</p></dd>


<dt id="arg-pattern">pattern<a class="anchor" aria-label="anchor" href="#arg-pattern"></a></dt>
<dd><p>a regular expression to match in the horizon designation column. See:<code>hzdesgn</code></p></dd>


<dt id="arg-fun">FUN<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>a function that returns a single value, and takes argument <code>na.rm</code></p></dd>


<dt id="arg-top">top<a class="anchor" aria-label="anchor" href="#arg-top"></a></dt>
<dd><p>should the top (TRUE) or bottom (FALSE) depth be returned for matching horizons? Default: <code>TRUE</code>.</p></dd>


<dt id="arg-hzdesgn">hzdesgn<a class="anchor" aria-label="anchor" href="#arg-hzdesgn"></a></dt>
<dd><p>column name containing horizon designations. Default: <code>guessHzDesgnName(p)</code></p></dd>


<dt id="arg-no-contact-depth">no.contact.depth<a class="anchor" aria-label="anchor" href="#arg-no-contact-depth"></a></dt>
<dd><p>depth to assume that contact did not occur.</p></dd>


<dt id="arg-no-contact-assigned">no.contact.assigned<a class="anchor" aria-label="anchor" href="#arg-no-contact-assigned"></a></dt>
<dd><p>depth to assign when a contact did not occur.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>logical. Remove <code>NA</code>? (default: <code>TRUE</code>)</p></dd>


<dt id="arg-simplify">simplify<a class="anchor" aria-label="anchor" href="#arg-simplify"></a></dt>
<dd><p>logical. Return single profile results as vector (default: <code>TRUE</code>) or <code>data.frame</code> (<code>FALSE</code>)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>a numeric vector containing specified depth(s) of horizons matching a pattern. If <code>length(p) &gt; 1</code> then a <em>data.frame</em> containing profile ID, horizon ID, top or bottom depths, horizon designation and pattern.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Andrew G. Brown</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># construct a fake profile</span></span></span>
<span class="r-in"><span><span class="va">spc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id<span class="op">=</span><span class="fl">1</span>, taxsubgrp <span class="op">=</span> <span class="st">"Lithic Haploxerepts"</span>,</span></span>
<span class="r-in"><span>                  hzname   <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"AB"</span>,<span class="st">"Bw"</span>,<span class="st">"BC"</span>,<span class="st">"R"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  hzdept   <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">0</span>,  <span class="fl">20</span>, <span class="fl">32</span>, <span class="fl">42</span>,  <span class="fl">49</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  hzdepb   <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">32</span>, <span class="fl">42</span>, <span class="fl">49</span>, <span class="fl">200</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  clay     <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="fl">22</span>, <span class="fl">22</span>, <span class="fl">21</span>,  <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  texcl    <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="st">"l"</span>,<span class="st">"l"</span>,<span class="st">"l"</span>, <span class="st">"l"</span>,<span class="st">"br"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  d_value  <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">5</span>,   <span class="fl">5</span>,  <span class="fl">5</span>,  <span class="fl">6</span>,  <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  m_value  <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">4</span>,  <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  m_chroma <span class="op">=</span> <span class="fu"><a href="combine-SoilProfileCollection-method.html">c</a></span><span class="op">(</span><span class="fl">2</span>,   <span class="fl">3</span>,  <span class="fl">4</span>,  <span class="fl">4</span>,  <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># promote to SoilProfileCollection</span></span></span>
<span class="r-in"><span><span class="fu"><a href="depths.html">depths</a></span><span class="op">(</span><span class="va">spc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">id</span> <span class="op">~</span> <span class="va">hzdept</span> <span class="op">+</span> <span class="va">hzdepb</span></span></span>
<span class="r-in"><span><span class="fu"><a href="hzdesgnname.html">hzdesgnname</a></span><span class="op">(</span><span class="va">spc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">'hzname'</span></span></span>
<span class="r-in"><span><span class="fu"><a href="hztexclname.html">hztexclname</a></span><span class="op">(</span><span class="va">spc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">'texcl'</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multiple horizons contain B</span></span></span>
<span class="r-in"><span><span class="fu">depthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20 32 42</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># deepest top depth of horizon containing B</span></span></span>
<span class="r-in"><span><span class="fu">maxDepthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 42</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># shallowest top depth</span></span></span>
<span class="r-in"><span><span class="fu">minDepthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># deepest bottom depth</span></span></span>
<span class="r-in"><span><span class="fu">maxDepthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span>, top <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 49</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># deepest bottom depth above 35cm</span></span></span>
<span class="r-in"><span><span class="fu">maxDepthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span>, top <span class="op">=</span> <span class="cn">FALSE</span>, no.contact.depth <span class="op">=</span> <span class="fl">35</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 32</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># assign infinity (Inf) if B horizon does not start within 10cm</span></span></span>
<span class="r-in"><span><span class="fu">minDepthOf</span><span class="op">(</span><span class="va">spc</span>, <span class="st">"B"</span>, no.contact.depth <span class="op">=</span> <span class="fl">10</span>, no.contact.assigned <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Inf</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

